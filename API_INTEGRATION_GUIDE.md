# API ν†µν•© κ°€μ΄λ“

Seoul in a Bite ν”„λ΅μ νΈμ—μ„ ν•κµ­λ¬Έν™”μ •λ³΄μ› APIμ™€ Google Maps API(SerpAPI)λ¥Ό ν†µν•©ν•μ—¬ μ‹¤μ  λ§›μ§‘ λ°μ΄ν„°λ¥Ό μμ§‘ν•λ” λ°©λ²•μ„ μ„¤λ…ν•©λ‹λ‹¤.

---

## π“‹ λ©μ°¨

1. [κ°μ”](#κ°μ”)
2. [API ν‚¤ λ°κΈ‰](#api-ν‚¤-λ°κΈ‰)
3. [ν™κ²½λ³€μ μ„¤μ •](#ν™κ²½λ³€μ-μ„¤μ •)
4. [λ°μ΄ν„° μμ§‘ μ‹¤ν–‰](#λ°μ΄ν„°-μμ§‘-μ‹¤ν–‰)
5. [API μƒμ„Έ μ„¤λ…](#api-μƒμ„Έ-μ„¤λ…)
6. [λ¬Έμ  ν•΄κ²°](#λ¬Έμ -ν•΄κ²°)

---

## κ°μ”

μ΄ ν”„λ΅μ νΈλ” λ‘ κ°€μ§€ μ£Όμ” APIλ¥Ό μ‚¬μ©ν•μ—¬ λ§›μ§‘ λ°μ΄ν„°λ¥Ό μμ§‘ν•©λ‹λ‹¤:

1. **ν•κµ­λ¬Έν™”μ •λ³΄μ› API** - μ„μΈ μ§€μ—­ λ§›μ§‘ κΈ°λ³Έ μ •λ³΄ (μ΄λ¦„, μ£Όμ†, μ„μΉ, μΉ΄ν…κ³ λ¦¬)
2. **SerpAPI (Google Maps)** - μ¶”κ°€ μ •λ³΄ (ν‰μ , λ¦¬λ·°, μ‚¬μ§„, μμ—…μ‹κ°„)

---

## API ν‚¤ λ°κΈ‰

### 1. ν•κµ­λ¬Έν™”μ •λ³΄μ› API ν‚¤

#### λ°κΈ‰ λ°©λ²•
1. [λ¬Έν™” κ³µκ³µλ°μ΄ν„°κ΄‘μ¥](https://www.culture.go.kr/data/main/main.do) μ ‘μ†
2. νμ›κ°€μ… λ° λ΅κ·ΈμΈ
3. "μ¤ν” API" λ©”λ‰΄ ν΄λ¦­
4. "μ „κµ­ μ‹ν‹°ν¬μ–΄ μ½”μ¤μ™€ ν•¨κ»ν•λ” λ§›μ§‘ μ •λ³΄" API κ²€μƒ‰
5. "ν™μ©μ‹ μ²­" λ²„νΌ ν΄λ¦­
6. μ‹ μ²­μ„ μ‘μ„± λ° μ μ¶
7. μΉμΈ ν›„ "λ§μ΄νμ΄μ§€" > "μ¤ν”API" > "μΈμ¦ν‚¤ λ°κΈ‰ν„ν™©"μ—μ„ ν‚¤ ν™•μΈ

#### API μ •λ³΄
- **URL**: `https://api.kcisa.kr/openapi/API_CNV_063/request`
- **μ κ³µ λ°μ΄ν„°**:
  - λ§›μ§‘ μ΄λ¦„, μ§€μ λ…, λ¶„λ¥ (ν•μ‹/λ¶„μ‹/μΉν‚¨/λ™μ–‘μ‹/μ„μ–‘μ‹/ν¨μ¤νΈν‘Έλ“/λ·”ν/ν“¨μ „)
  - λ„λ΅λ… μ£Όμ†, μ§€λ² μ£Όμ†
  - μ„λ„, κ²½λ„
  - μ‹ν‹°ν¬μ–΄ μ •λ³΄

#### μ”μ²­ νλΌλ―Έν„°
- `serviceKey` (ν•„μ): λ°κΈ‰λ°›μ€ API ν‚¤
- `numOfRows` (ν•„μ): ν• νμ΄μ§€ κ²°κ³Ό μ (μµλ€ 100)
- `pageNo` (ν•„μ): νμ΄μ§€ λ²νΈ
- `areaNm` (ν•„μ): μ§€μ—­λ… (μ: μ„μΈ, κ°•λ‚¨κµ¬, μμ²μ‹)
- `clNm` (μ„ νƒ): μ‹λ‹Ή λ¶„λ¥λ… (ν•μ‹/λ¶„μ‹/μΉν‚¨/λ™μ–‘μ‹/μ„μ–‘μ‹/ν¨μ¤νΈν‘Έλ“/λ·”ν/ν“¨μ „)

#### μ‘λ‹µ μμ‹
\`\`\`json
{
  "response": {
    "header": {
      "resultCode": "0000",
      "resultMsg": "μ •μƒ μ²λ¦¬λμ—μµλ‹λ‹¤"
    },
    "body": {
      "items": {
        "item": [
          {
            "rstrNm": "λ…λ™ κµμ",
            "rstrBhfNm": "λ³Έμ ",
            "rstrClNm": "ν•μ‹",
            "rstrRoadAddr": "μ„μΈμ‹ μ¤‘κµ¬ λ…λ™ 1-1",
            "rstrLatPos": "37.5665",
            "rstrLotPos": "126.9780"
          }
        ]
      },
      "totalCount": 100
    }
  }
}
\`\`\`

---

### 2. SerpAPI ν‚¤

#### λ°κΈ‰ λ°©λ²•
1. [SerpAPI μ›Ήμ‚¬μ΄νΈ](https://serpapi.com/) μ ‘μ†
2. "Sign Up" λ²„νΌ ν΄λ¦­ν•μ—¬ νμ›κ°€μ…
3. μ΄λ©”μΌ μΈμ¦ μ™„λ£
4. λ€μ‹λ³΄λ“μ—μ„ "API Key" ν™•μΈ
5. λ¬΄λ£ ν”λ: μ›” 100ν κ²€μƒ‰ κ°€λ¥

#### API μ •λ³΄
- **URL**: `https://serpapi.com/search.json`
- **μ κ³µ λ°μ΄ν„°**:
  - Google Maps κ²€μƒ‰ κ²°κ³Ό
  - μ¥μ† μƒμ„Έ μ •λ³΄ (ν‰μ , λ¦¬λ·°, μ‚¬μ§„, μμ—…μ‹κ°„)
  - λ¦¬λ·° λ©λ΅
  - μ‚¬μ§„ λ©λ΅

#### μ£Όμ” μ—”μ§„
1. **google_maps** - μ¥μ† κ²€μƒ‰ λ° μƒμ„Έ μ •λ³΄
2. **google_maps_reviews** - λ¦¬λ·° λ©λ΅
3. **google_maps_photos** - μ‚¬μ§„ λ©λ΅
4. **google_maps_autocomplete** - μλ™μ™„μ„± κ²€μƒ‰

#### μ”μ²­ μμ‹ (μ¥μ† κ²€μƒ‰)
\`\`\`bash
GET https://serpapi.com/search.json?engine=google_maps&q=μ„μΈ+λ§›μ§‘&ll=@37.5665,126.978,14z&type=search&api_key=YOUR_API_KEY
\`\`\`

#### μ‘λ‹µ μμ‹
\`\`\`json
{
  "local_results": [
    {
      "position": 1,
      "title": "λ…λ™ κµμ",
      "rating": 4.8,
      "reviews": 342,
      "address": "μ„μΈμ‹ μ¤‘κµ¬ λ…λ™ 1-1",
      "phone": "02-1234-5678",
      "hours": "11:00 - 22:00",
      "gps_coordinates": {
        "latitude": 37.5665,
        "longitude": 126.978
      },
      "thumbnail": "https://example.com/image.jpg"
    }
  ]
}
\`\`\`

---

## ν™κ²½λ³€μ μ„¤μ •

### 1. λ΅μ»¬ κ°λ° ν™κ²½

ν”„λ΅μ νΈ λ£¨νΈμ— `.env` νμΌ μƒμ„±:

\`\`\`env
# ν•κµ­λ¬Έν™”μ •λ³΄μ› API ν‚¤
KCISA_API_KEY=your_kcisa_api_key_here

# SerpAPI ν‚¤
SERPAPI_KEY=your_serpapi_key_here

# λ°μ΄ν„°λ² μ΄μ¤ URL (μ΄λ―Έ μ„¤μ •λμ–΄ μμ)
DATABASE_URL=your_database_url_here
\`\`\`

### 2. Manus κ΄€λ¦¬ UIμ—μ„ μ„¤μ •

1. Manus μ›Ή μ• ν”λ¦¬μΌ€μ΄μ… κ΄€λ¦¬ UI μ ‘μ†
2. "Settings" > "Secrets" λ©”λ‰΄ ν΄λ¦­
3. "Add Secret" λ²„νΌ ν΄λ¦­
4. λ‹¤μ ν™κ²½λ³€μ μ¶”κ°€:
   - `KCISA_API_KEY`: ν•κµ­λ¬Έν™”μ •λ³΄μ› API ν‚¤
   - `SERPAPI_KEY`: SerpAPI ν‚¤

---

## λ°μ΄ν„° μμ§‘ μ‹¤ν–‰

### 1. μλ™ μ‹¤ν–‰

ν„°λ―Έλ„μ—μ„ λ‹¤μ λ…λ Ήμ–΄ μ‹¤ν–‰:

\`\`\`bash
cd /home/ubuntu/seoul_in_a_bite_web
node collect-restaurant-data.mjs
\`\`\`

### 2. μ‹¤ν–‰ κ³Όμ •

μ¤ν¬λ¦½νΈλ” λ‹¤μ λ‹¨κ³„λ΅ λ°μ΄ν„°λ¥Ό μμ§‘ν•©λ‹λ‹¤:

1. **1λ‹¨κ³„**: ν•κµ­λ¬Έν™”μ •λ³΄μ› APIμ—μ„ μ„μΈ λ§›μ§‘ λ°μ΄ν„° μμ§‘
   - μΉ΄ν…κ³ λ¦¬λ³„λ΅ λ°μ΄ν„° μμ§‘ (ν•μ‹, λ¶„μ‹, μΉν‚¨, λ™μ–‘μ‹, μ„μ–‘μ‹)
   - κ° μΉ΄ν…κ³ λ¦¬λ‹Ή μµλ€ 50κ° λ§›μ§‘

2. **2λ‹¨κ³„**: μμ§‘λ λ°μ΄ν„°λ¥Ό λ°μ΄ν„°λ² μ΄μ¤μ— μ €μ¥
   - μ¤‘λ³µ ν™•μΈ λ° λ°μ΄ν„° μ •μ 
   - λ‹¤κµ­μ–΄ λ²μ—­ (μμ–΄, λ²μ²΄μ, κ°„μ²΄μ)

3. **3λ‹¨κ³„**: Google Maps APIλ΅ μ¶”κ°€ μ •λ³΄ μμ§‘ (μ„ νƒμ‚¬ν•­)
   - ν‰μ , λ¦¬λ·° μ, μ‚¬μ§„ λ“± λ³΄κ°•

### 3. μ‹¤ν–‰ κ²°κ³Ό

\`\`\`
π€ λ§›μ§‘ λ°μ΄ν„° μμ§‘ μ‹μ‘!

============================================================
π“ 1λ‹¨κ³„: ν•κµ­λ¬Έν™”μ •λ³΄μ› APIμ—μ„ λ°μ΄ν„° μμ§‘
============================================================

π“΅ ν•κµ­λ¬Έν™”μ •λ³΄μ› API νΈμ¶ μ¤‘... (μ§€μ—­: μ„μΈ, μΉ΄ν…κ³ λ¦¬: ν•μ‹)
β… 50κ°μ λ§›μ§‘ λ°μ΄ν„°λ¥Ό κ°€μ Έμ™”μµλ‹λ‹¤.

π“ μ΄ 250κ°μ λ§›μ§‘ λ°μ΄ν„°λ¥Ό μμ§‘ν–μµλ‹λ‹¤.

============================================================
π’Ύ 2λ‹¨κ³„: λ°μ΄ν„°λ² μ΄μ¤μ— μ €μ¥
============================================================

π’Ύ λ§›μ§‘ μ €μ¥ μ™„λ£: λ…λ™ κµμ
π’Ύ λ§›μ§‘ μ €μ¥ μ™„λ£: μ΄νƒμ› λ°”λ² ν

β… 20κ°μ λ§›μ§‘μ„ λ°μ΄ν„°λ² μ΄μ¤μ— μ €μ¥ν–μµλ‹λ‹¤.

============================================================
π‰ λ°μ΄ν„° μμ§‘ μ™„λ£!
============================================================
\`\`\`

---

## API μƒμ„Έ μ„¤λ…

### ν•κµ­λ¬Έν™”μ •λ³΄μ› API μ‚¬μ© μμ‹

\`\`\`typescript
import axios from "axios";

async function fetchKCISARestaurants() {
  const url = "https://api.kcisa.kr/openapi/API_CNV_063/request";
  const params = {
    serviceKey: "YOUR_API_KEY",
    numOfRows: "100",
    pageNo: "1",
    areaNm: "μ„μΈ",
    clNm: "ν•μ‹",
  };

  const response = await axios.get(url, { params });
  const items = response.data.response.body.items.item;
  
  return items;
}
\`\`\`

### SerpAPI μ‚¬μ© μμ‹

\`\`\`typescript
import axios from "axios";

async function searchGoogleMapsPlaces(query: string) {
  const url = "https://serpapi.com/search.json";
  const params = {
    engine: "google_maps",
    q: query,
    ll: "@37.5665,126.978,14z",
    type: "search",
    api_key: "YOUR_API_KEY",
  };

  const response = await axios.get(url, { params });
  const places = response.data.local_results;
  
  return places;
}
\`\`\`

---

## λ¬Έμ  ν•΄κ²°

### 1. API ν‚¤κ°€ μ‘λ™ν•μ§€ μ•μ„ λ•

**ν•κµ­λ¬Έν™”μ •λ³΄μ› API**
- API ν‚¤ μΉμΈ μƒνƒ ν™•μΈ (λ§μ΄νμ΄μ§€μ—μ„ ν™•μΈ)
- μ‹ μ²­ ν›„ μΉμΈκΉμ§€ 1-2μΌ μ†μ”λ  μ μμ
- ν‚¤ ν•μ‹ ν™•μΈ (κ³µλ°±μ΄λ‚ νΉμλ¬Έμ ν¬ν•¨ μ—¬λ¶€)

**SerpAPI**
- λ¬΄λ£ ν”λ ν•λ„ ν™•μΈ (μ›” 100ν)
- λ€μ‹λ³΄λ“μ—μ„ μ‚¬μ©λ‰ ν™•μΈ
- API ν‚¤ μ¬λ°κΈ‰ μ‹λ„

### 2. λ°μ΄ν„°κ°€ μμ§‘λμ§€ μ•μ„ λ•

- ν™κ²½λ³€μκ°€ μ¬λ°”λ¥΄κ² μ„¤μ •λμ—λ”μ§€ ν™•μΈ
- λ„¤νΈμ›ν¬ μ—°κ²° ν™•μΈ
- API μ„λ²„ μƒνƒ ν™•μΈ (μ„λΉ„μ¤ μ κ²€ μ¤‘μΌ μ μμ)
- λ΅κ·Έ λ©”μ‹μ§€ ν™•μΈν•μ—¬ μ¤λ¥ μ›μΈ νμ•…

### 3. λ°μ΄ν„°λ² μ΄μ¤ μ €μ¥ μ¤λ¥

- λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° ν™•μΈ
- `DATABASE_URL` ν™κ²½λ³€μ ν™•μΈ
- λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§κ°€ μµμ‹  μƒνƒμΈμ§€ ν™•μΈ (`pnpm db:push`)

### 4. API νΈμ¶ μ ν•

**ν•κµ­λ¬Έν™”μ •λ³΄μ› API**
- μΌμΌ νΈμ¶ μ ν•: 1,000ν
- μ΄λ‹Ή νΈμ¶ μ ν•: 10ν
- μ ν• μ΄κ³Ό μ‹ λ‹¤μ λ‚ κΉμ§€ λ€κΈ°

**SerpAPI**
- λ¬΄λ£ ν”λ: μ›” 100ν
- μ λ£ ν”λμΌλ΅ μ—…κ·Έλ μ΄λ“ κ³ λ ¤
- νΈμ¶ κ°„κ²©μ„ λ‘μ–΄ μ ν• νν”Ό

---

## λ‹¤μ λ‹¨κ³„

1. **λ°μ΄ν„° ν’μ§ κ°μ„ **
   - μμ§‘λ λ°μ΄ν„° κ²€ν† 
   - λ„λ½λ μ •λ³΄ λ³΄μ™„
   - μ¤‘λ³µ λ°μ΄ν„° μ κ±°

2. **μλ™ν™”**
   - μ •κΈ°μ μΌλ΅ λ°μ΄ν„° μ—…λ°μ΄νΈ (Cron Job)
   - μƒλ΅μ΄ λ§›μ§‘ μλ™ μ¶”κ°€
   - νμ—…ν• λ§›μ§‘ μλ™ μ κ±°

3. **κ΄€λ¦¬μ νμ΄μ§€**
   - μμ§‘λ λ°μ΄ν„° κ΄€λ¦¬ UI
   - μλ™ λ°μ΄ν„° μ¶”κ°€/μμ •/μ‚­μ 
   - λ°μ΄ν„° μμ§‘ μ¤μΌ€μ¤„λ§

4. **λ°μ΄ν„° λ³΄κ°•**
   - μ‚¬μ©μ λ¦¬λ·° μμ§‘
   - λ§›μ§‘ μ‚¬μ§„ μ¶”κ°€
   - λ©”λ‰΄ μ •λ³΄ μƒμ„Έν™”

---

## μ°Έκ³  μλ£

- [ν•κµ­λ¬Έν™”μ •λ³΄μ› API λ¬Έμ„](https://www.culture.go.kr/data/openapi/openapiView.do?id=603&category=API&gubun=A)
- [SerpAPI λ¬Έμ„](https://serpapi.com/google-maps-api)
- [Google Maps API κ°€μ΄λ“](https://developers.google.com/maps/documentation)

---

## λΌμ΄μ„ μ¤ λ° μ΄μ© μ•½κ΄€

- **ν•κµ­λ¬Έν™”μ •λ³΄μ› API**: κ³µκ³µλ°μ΄ν„° μ΄μ© μ•½κ΄€ μ¤€μ
- **SerpAPI**: SerpAPI μ΄μ© μ•½κ΄€ μ¤€μ
- **Google Maps λ°μ΄ν„°**: Google Maps ν”λ«νΌ μ•½κ΄€ μ¤€μ

λ°μ΄ν„° μμ§‘ μ‹ κ° μ„λΉ„μ¤μ μ΄μ© μ•½κ΄€μ„ λ°λ“μ‹ ν™•μΈν•κ³  μ¤€μν•μ„Έμ”.
